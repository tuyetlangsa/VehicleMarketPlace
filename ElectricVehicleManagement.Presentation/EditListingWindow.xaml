<Window x:Class="ElectricVehicleManagement.Presentation.EditListingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Edit Listing"
        WindowStartupLocation="CenterScreen"
        Height="600"
        Width="1000"
        FontFamily="Tahoma"
        FontSize="16"
        Background="#FFA7F3D0">

    <Window.Resources>

        <!-- Label -->
        <Style x:Key="FormLabel" TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>

        <!-- Normal TextBox -->
        <Style TargetType="TextBox">
            <Setter Property="Height" Value="32"/>
            <Setter Property="Padding" Value="6,3"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <!-- Multiline TextBox -->
        <Style x:Key="MultilineTextBox" TargetType="TextBox" 
               BasedOn="{StaticResource {x:Type TextBox}}">
            <Setter Property="Height" Value="120"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="Padding" Value="6"/>
        </Style>

        <!-- Section title -->
        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#FF2C3E50"/>
            <Setter Property="Margin" Value="0,10,0,8"/>
        </Style>

        <!-- Template for existing images -->
        <DataTemplate x:Key="ExistingImageTemplate">
            <StackPanel Orientation="Horizontal" Margin="0,5,0,5">
                <Image Source="{Binding ImageUrl}"
                       Width="90" Height="70"
                       Stretch="UniformToFill"
                       Margin="5"/>

                <Button Content="Remove"
                        Tag="{Binding Id}"
                        Width="80"
                        Height="30"
                        Background="#FFC0392B"
                        Foreground="White"
                        FontWeight="Bold"
                        Margin="10,0,0,0"
                        Click="RemoveExistingImage_Click"/>
            </StackPanel>
        </DataTemplate>

    </Window.Resources>


    <!-- Main layout -->
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <Border Grid.Row="0"
                Background="#FF2C3E50"
                Padding="10"
                CornerRadius="10">
            <TextBlock Text="Edit Listing"
                       Foreground="White"
                       FontSize="22"
                       FontWeight="Bold"/>
        </Border>

        <!-- FORM -->
        <ScrollViewer Grid.Row="1"
                      Margin="0,15,0,15"
                      VerticalScrollBarVisibility="Auto">

            <Border Background="White"
                    CornerRadius="10"
                    Padding="24"
                    BorderBrush="#FFBDC3C7"
                    BorderThickness="1">

                <StackPanel>

                    <!-- BASIC -->
                    <TextBlock Text="Basic information" Style="{StaticResource SectionTitle}"/>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Title:" Width="180" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="TitleTextBox" Width="500"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Description:" Width="180" Style="{StaticResource FormLabel}" VerticalAlignment="Top"/>
                        <TextBox x:Name="DescriptionTextBox" Width="700" Style="{StaticResource MultilineTextBox}"/>
                    </StackPanel>

                    <Separator Margin="0,5"/>

                    <!-- PRICE & YEAR -->
                    <TextBlock Text="Pricing and year" Style="{StaticResource SectionTitle}"/>
                    
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Price (VND):" Width="180" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="PriceTextBox" Width="200"/>

                        <TextBlock Text="Manufacturing year:" Width="180" Margin="20,0,0,0" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="YearTextBox" Width="120"/>
                    </StackPanel>

                    <Separator Margin="0,10"/>

                    <!-- VEHICLE DETAILS -->
                    <TextBlock Text="Vehicle details" Style="{StaticResource SectionTitle}"/>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Brand:" Width="180" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="BrandTextBox" Width="220"/>

                        <TextBlock Text="Model:" Width="160" Margin="20,0,0,0" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="ModelTextBox" Width="220"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Body type:" Width="180" Style="{StaticResource FormLabel}"/>
                        <ComboBox x:Name="BodyTypeComboBox" Width="220"/>

                        <TextBlock Text="Energy:" Width="160" Margin="20,0,0,0" Style="{StaticResource FormLabel}"/>
                        <ComboBox x:Name="EnergyComboBox" Width="220"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Transmission:" Width="180" Style="{StaticResource FormLabel}"/>
                        <ComboBox x:Name="TransmissionComboBox" Width="220"/>

                        <TextBlock Text="Seats:" Width="160" Margin="20,0,0,0" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="SeatingTextBox" Width="80"/>
                    </StackPanel>

                    <Separator Margin="0,10"/>

                    <!-- BATTERY -->
                    <TextBlock Text="Battery and usage" Style="{StaticResource SectionTitle}"/>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Mileage (km):" Width="180" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="MileageTextBox" Width="180"/>

                        <TextBlock Text="Battery capacity (kWh):" Width="200" Margin="20,0,0,0" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="BatteryCapTextBox" Width="120"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Battery health (%):" Width="180" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="BatteryCondTextBox" Width="120"/>
                    </StackPanel>

                    <Separator Margin="0,10"/>

                    <!-- LOCATION -->
                    <TextBlock Text="Location and images" Style="{StaticResource SectionTitle}"/>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Location:" Width="180" Style="{StaticResource FormLabel}"/>
                        <TextBox x:Name="LocationTextBox" Width="400"/>
                    </StackPanel>

                    <!-- EXISTING IMAGES -->
                    <TextBlock Text="Existing images:" FontWeight="Bold" Margin="0,10,0,5"/>
                    <ListBox x:Name="ExistingImagesList"
                             ItemTemplate="{StaticResource ExistingImageTemplate}"
                             Width="700"/>

                    <!-- SELECT NEW IMAGES -->
                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                        <Button Content="Add new images..."
                                Width="160" Height="34"
                                Background="#FF2980B9"
                                Foreground="White"
                                Click="SelectImageButton_Click"/>

                        <TextBlock x:Name="SelectedImageTextBlock"
                                   Margin="10,0,0,0"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <TextBlock x:Name="SelectedImageCountTextBlock"
                               FontSize="13"
                               Foreground="#7F8C8D"
                               Margin="0,5"/>

                </StackPanel>
            </Border>

        </ScrollViewer>

        <!-- BUTTONS -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right">
            <Button Content="Cancel"
                    Width="120" Height="38"
                    Background="#C0392B"
                    Foreground="White"
                    Click="CancelButton_Click"/>

            <Button Content="Save changes"
                    Width="160" Height="38"
                    Background="#27AE60"
                    Foreground="White"
                    Margin="10,0,0,0"
                    Click="SaveButton_Click"/>
        </StackPanel>

    </Grid>

</Window>
